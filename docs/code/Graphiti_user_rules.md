# Graphiti MCP ツールを用いたエージェントの記憶管理ガイド

--------user_rules.md

# Graphiti MCP ツールを用いたエージェントの記憶管理ガイド

## タスクを始める前に

- **必ず最初に検索を行う：** 作業を始める前に、`search_nodes` ツールを使用して関連する「偏好（Preference）」や「手順（Procedure）」を探してください。
- **事実も検索する：** `search_facts` ツールを使用して、タスクに関係する可能性のある関係性や事実情報を見つけてください。
- **エンティティタイプで絞り込む：** ノード検索時に `Preference`、`Procedure`、`Requirement` を指定すると、目的に沿った結果が得られます。
- **一致する項目をすべて確認：** 現在のタスクに関係する偏好・手順・事実があれば、内容を注意深く確認してください。

---

## 新規情報や更新情報は必ず保存する

- **ニーズや偏好はすぐに記録：** ユーザーが要件（Requirement）や偏好（Preference）を示したら、`add_memory` を使ってすぐに記録してください。

  - _ベストプラクティス：_ 長い要件は、意味ごとに分割して短い論理ブロックにするのが望ましいです。

- **既存情報の更新である場合は明示：** 既に存在する知識を更新する場合は、それが変更であることを明確に記録してください。
- **手順は明確に記録：** ユーザーがどのように作業を進めたいかがわかったら、それを「手順（Procedure）」として保存してください。
- **事実関係は必ず記録：** エンティティ間の関係や関連性を把握した場合は、「事実（Fact）」として保存してください。
- **カテゴリは具体的に：** 偏好や手順には明確なカテゴリを付け、後で検索しやすくしてください。

---

## 作業中の注意点

- **偏好に従う：** 発見された偏好があれば、それに沿って作業内容を調整してください。
- **手順を正確に実行：** 現在のタスクに対応する手順が存在する場合は、ステップ通りに正確に実行してください。
- **関連事実を活用：** 関連する事実情報をもとに、判断や提案の精度を高めましょう。
- **一貫性を保つ：** すでに記録されている偏好・手順・事実と矛盾しないように、整合性を意識してください。

---

## ベストプラクティス

- **提案前には検索を：** 新たな提案を行う前に、既存の知識がすでにあるか確認してください。
- **ノードと事実を両方検索：** 複雑なタスクに対しては、ノードと事実の両面から検索して全体像を把握しましょう。
- **`center_node_uuid` を活用：** 特定のノードに関する情報を深堀りしたい場合は、そのノードを中心に検索を行ってください。
- **具体的な一致を優先：** より具体的な情報を、一般的な情報よりも優先して使用してください。
- **パターンを見つけたら記録：** ユーザーの行動や言動に一定のパターンが見られる場合は、それを偏好や手順として記録することを検討しましょう。

---

## リマインダー

ナレッジグラフはあなたの「記憶」です。
それを継続的に活用し、ユーザーの既存の偏好・手順・事実を尊重した、パーソナライズされた支援を提供しましょう。

---

--------user_rules.md
